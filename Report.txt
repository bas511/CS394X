Abstract – Ms. Pac-Man has long been a benchmark for testing software-playing artificial intelligence agents. This paper examines an algorithm used to play the game, as well as multiple variants of the algorithm. Using neuroevolution, optimal parameters were found and the best results from each algorithm, as well as results from attempts by human players using the same strategy, were compared. [SAVE THIS PART FOR RESULTS]
I.	INTRODUCTION
Video games have long been used to analyze Artificial Intelligence (AI) algorithms. One of the most popular genres of games to test algorithms are maze games, due to the necessity of pathfinding and the likely presence of some form of obstacle avoidance. Pac-Man, one of the first and undoubtedly the most universally recognized of these games, has been the subject of much research in game-playing AI. This is partly because of its quality of being simple enough to allow for significant research to be done while complex enough to require somewhat intensive algorithms. However, some aspects of the game lend itself to be rather trivial for AI software controllers to succeed, even at a high level. However, Ms. Pac-Man, a variant on the original game format, proves to be a better-suited challenge for an AI controller, due to its non-deterministic nature. The lower level of predictability in ghost behavior provides more use in examining different approaches.
As artificial intelligence controllers are perfected through years of work by various teams and individuals, the implementations tend to converge to similar strategies.  Most video games are designed in such a way that a particular technique for winning outperforms all other time and time again.  As a result, many of the winning controllers form a very homogenous population.  In conducting this research, our goal is to test an inventive strategy and see whether or not it holds up to more popular and common methods of Pac-man control.
Researching the success of different types of artificial intelligence in gaming is important because of the significance that modern video gaming and its associated technologies has on society in the current day and age.  Successfully programming a controller than can avoid ghosts in a maze may seem trivial to some, but the applied strategies can be extrapolated for more complex pathfinding and combatant avoidance, which in in turn can influence intelligence in scenarios more relevant to the real world.
II. 	BACKGROUND
The world of artificial intelligence for gaming is no stranger to Pac-Man; Pacman VS Ghosts, a renowned competition designed to pit the best player and ghost AIs against each other, ran annually until 2012.
The framework being used for this paper is called Ms. Pacman AI .NET.  It is implemented in C# and was used for a competition at IEEE’s World Congress on Computational Intelligence in 2008.  The source code for the framework is packaged with a few sample controllers, including one that implements Dijkstra’s algorithm for pathfinding between points on the map.  Also included is the functionality to simulate multiple games in succession in the console without the added delay caused by the Ms. Pac-Man GUI.  This method simply outputs the score of the controller, making mass data collection very straightforward and less time-consuming.  By modifying a blank controller and utilizing the vanilla Ms. Pac-Man simulator provided, we were able to implement our own strategy with ease.
Previous research teams have examined the most efficient methods to play this style of game, generally with either Ms. Pac-Man or Pac-Man, to which the same techniques are applicable, given their close similarities in game design and gameplay.  One such team is David Robles and Simon M. Lucas, who co-authored the paper A Simple Tree Search Method for Playing Ms. Pac-Man.  As the title of their work suggests, Robles and Lucas chose to implement their strategy in the form of a search tree.  Using a screen capture software they designed, the program maps out all possible routes of length 10, with each unit set equal to the size of one node, and creates a search tree, filling in the entries with the type of object located at each node.  Given that the analysis is performed on a picture, each location can only be associated with one type, so any node that is home to a pill will only be registered as such if a ghost is not currently traveling over it; the ghosts naturally take precedence given their danger to the player.
Once the tree is compiled, Robles and Lucas’ technique is to pick a safe path in accordance with one of three strategies.  The first strategy, Rand-Safe-Path, selects a random path from the list of those without a ghost.  Most-Pills-Safe-Path, the second strategy, instead chooses the most lucrative safe path.  The presence of a power pill automatically forces the algorithm to choose that path.  The final path, ¬Hand-Coded-Select, is more unique and chooses its path based on a specific function hand coded by the team.  This strategy differs fundamentally from the strategy discussed in this paper in that the power pill is prioritized over all else.
The conclusion drawn by Robles and Lucas is that their hand-coded algorithm had the most success, but without environmental information, such as the direction in which the ghosts are currently moving, the controller cannot truly compete with the best around.  The framework utilized in this paper resolves this issue, as the controller can access the ghosts’ information because the data is obtained through the simulator rather than through a simple 2D screenshot.
Another paper which is relevant to the research done here is called Evolving a Ms. PacMan Controller using Grammatical Evolution, authored by Edgar Galv´an-L´opez, John Mark Swafford, Michael O’Neill, and Anthony Brabazon from the Natural Computing Research & Applications Group, a part of University College Dublin.  Related to this paper through its use of evolution, the work done by the group from Dublin consisted of the development of a hard-coded controller along with one to be evolved, providing adequate comparison between the two methods and, subsequently, an added degree of validity to the research itself.  In addition, three separate ghost teams were provided, each with their own specific methods.
The results generated are unable to convincingly show the success of the evolved controller compared to those which are hard coded.  The agent developed through neuroevolution achieved the best high score against all three ghost implementations, but the hard coded agent actually resulted in a higher average score over 100 runs in two of the categories.  The evolution, which exemplary, does not provide as consistent of a controller as one specifically designed for the task.
III. 	GAME DESIGN
Ms. Pac-Man, released in 1982 by publisher Midway Manufacturing, is an arcade-style survival game in which players must collect pills while avoiding collision with any of the game’s four colored ghosts, Blinky (Red), Pinky (Pink), Inky (Blue), and Sue (Orange).  In addition, there are four (4) power pellets located in the corners of the map.  For a brief period of time following the collected of a power pellet, the player is invincible and has the ability to eat the ghosts as they flee.  
The game is based of its predecessor, Pac-Man, which features the same general mechanics amidst several design changes.  For the purposes of AI development, only two of these changes are relevant; Ms. Pac-Man’s map features two tunnels to wrap around the map compared to Pac-Man’s one, and the ghosts in Ms. Pac-Man are designed with an element of randomness to their movements, which ensures that the player cannot simply implement a pattern-based strategy to succeed.
The scoring in Ms. Pac-Man is simple.  For collecting a pellet, the player receives 10 points.  During the period of invincibility associated with the power pill, eaten ghosts provide a point bonus of 200 * n, with n being the number of ghosts that have been eaten.  Once all the pills have been eaten, the game resets, and the ghosts, Ms. Pac-Man, and the pills all return to their former places.  
IV.	METHODS
Our controller combines a greedy strategy with a unique ghost avoidance strategy to attempt to clear the board of pellets as quickly as possible.  In our analysis of various Ms. Pac-Man strategies, we determined that passing back over areas with no pellets in order to chase ghosts for the 200, 400, 600, and 800 points they can potentially provide is less productive than obtaining a fresh playing field to work with since the first 300 or so points worth of pellets are very easy to obtain quickly and without dying.  To prevent the player from being trapped with ghosts on all sides, we implemented a “dead zone” at the center of the map, which contains the ghost spawner, giving it an increased element of risk, as this is also where the ghosts emerge after being eaten.  This area also is not home to any pellets, so moving through it is much less productive than traveling up and down the map through the long side corridors and tunnels.  To maximize the results of the controllers, neuroevolution will be used to evolve a set of magic numbers, producing the most efficient player given the parameters of the design.  These strategies will be discussed in more detail hereafter.
The board is split into four (4) quadrant of roughly equal size; quadrant 1 is the lower left corner, quadrant 2 is the lower right corner, quadrant 3 is the top right corner and quadrant 4 is the top left corner.  Every frame, the position of Ms. Pac-Man is recorded so as to store the quadrant in which she is currently located.  Using that information, the number of pellets for the given quadrant is counted.  In order to do this, each node, each of which corresponds to one (1) unit of space which contains exactly one (1) pellet, on the board is analyzed by looping through the data structure which stores every node.  If the node’s placement on the x and y axes falls within the specified range for the quadrant, the counter is incremented.  Given that the playing field is 28 pixels wide and 31 pixels tall, the first quadrant consists of all spaces from (0,0) to (14, 15), and the second, third, and fourth quadrants contains points in the range of (14, 0) to (28, 15),  (14, 15) to (28, 31), and (0, 15) to (14, 31), respectively.
Starting in quadrant 3, which is where Ms. Pac-Man spawns at the beginning of the game, the player greedily eats pellets within the current quadrant until one of two events occurs.  The first is that enough pellets have been eaten in the quadrant such that the number of remaining pellets falls below the threshold value.  If this happens, Ms. Pac-Man ceases to collect pellets and immediately moves to obtain the nearest power pellet, which will undoubtedly be the one located in her current quadrant, given the layout of the map.  Using the invincibility provided by the power pellet, the AI then travels to the closest quadrant in the counter-clockwise direction without regard to the location of the ghosts.  There is no need to record the locations of the ghosts at this point because even if they turn back to regular hunting mode, they spend their vulnerable time traveling away from the player, making them irrelevant for at least a short time following the conclusion of the period of imperviousness.  The second event which may occur during the collection of pellets is that a ghost enters within a set distance of Ms. Pac-Man, which is determined by a predefine value called PERSONAL_SPACE.  At this point, the action performed depends on whether or not PERSONAL_SPACE has been breached before this point.  If it has not, the player avoids the ghost in question and travels directly to the next quadrant, starting the pellet collection process anew.  If a ghost has been within a distance smaller than PERSONAL_SPACE previously, Ms. Pac-Man behaves as she does when the pellet threshold is reached; the power pellet is immediately collected, and a path is followed into the next quadrant.  This allows the player safe access to a new area and a brief opportunity to clear out the quadrant as much as possible without the thread of death.
Pathfinding for the controller is implemented as a simple algorithm similar to A*.  Once the controller has determined to which node it will travel next, it creates a route from the player’s position to the position of that node one node at a time, each time choosing the adjacent node which is closest to its destination.  This method is overridden when a ghost enters into the realm of PERSONAL_SPACE, at which point Ms. Pac-Man simply travels in a direction opposite the location of the ghost.
The code used to fulfill the dead zone requirement is located in the pathfinding algorithm.  Upon choosing a node with which to continue the path, the location of the node is compared to the boundaries of the dead zone.  If the node falls within those borders, it is removed from the calculation, and an alternate node is chose, after which the route determination carries on per usual.
The process of neuroevolution for the controller is fairly straightforward.  The purpose of it is to optimize the controller through the manipulation of three (3) magic numbers which dictate the effectiveness of certain aspects.  COMPLETION_PERCENTAGE, PERSONAL_SPACE, and _____________________ are the values which are changed for each stage of the evolution.  As discussed above, PERSONAL_SPACE corresponds to the radius of units around Ms. Pac-Man which looks out for the presence of a ghost.  If a ghost enters this radius, the player either evades the ghost or collects a power pill.  The alteration of this value can be very significant because it determines whether or not Ms. Pac-Man jumps the gun on collecting a power pill, making survival difficult later on, or waits too long to escape from the ghost, potentially leaving little space for evasion and no room for error in pathfinding.  COMPLETION_PERCENTAGE refers to the aforementioned pellet count threshold after which Ms. Pac-Man either collects the power pill or leaves the quadrant, depending on the circumstances.  If this value is too low, the power pill will be collected prematurely, once again making future ghost avoidance difficult, and if it is too low, an excessive amount of time will be spent roaming around a single quadrant, giving the ghosts more time to converge on Ms. Pac-Man’s position, making capture all the more likely.
V.	RESULTS
Gotta
VI.	DISCUSSION
Gotta tell ‘em all.
VII.	REFERENCES
Gotta cite ‘em all.
